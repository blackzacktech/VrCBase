<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="permissions-policy" content="interest-cohort=()">
    <title>Web-Root Explorer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
        }
        h1 {
            font-size: 24px;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
        .folder {
            font-weight: bold;
        }
        img {
            max-width: 150px;
            max-height: 150px;
            margin: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Web-Root Explorer</h1>
    <p>Dies ist eine Übersicht über alle Ordner und Bilder im Web-Root-Verzeichnis:</p>
    <div id="content"></div>

    <script>
        // Funktion, um Dateien und Ordner zu laden
        async function fetchDirectory(path) {
            const response = await fetch(path);
            if (!response.ok) {
                console.error(`Fehler beim Laden des Pfads: ${path}`);
                return [];
            }

            const text = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(text, 'text/html');
            const links = Array.from(doc.querySelectorAll('a'));

            return links
                .map(link => link.getAttribute('href'))
                .filter(href => href !== '../'); // Eliminiere den Link zum übergeordneten Verzeichnis
        }

        async function loadContent(path = './', container = document.getElementById('content')) {
            const items = await fetchDirectory(path);

            const ul = document.createElement('ul');

            for (const item of items) {
                const fullPath = path + item;

                // Prüfe, ob es ein Bild ist
                if (item.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                    const img = document.createElement('img');
                    img.src = fullPath;
                    ul.appendChild(img);
                } 
                // Prüfe, ob es ein Ordner ist
                else if (!item.includes('.')) {
                    const li = document.createElement('li');
                    li.className = 'folder';
                    li.textContent = item;
                    ul.appendChild(li);

                    // Unterordner-Inhalte laden
                    const subUl = document.createElement('ul');
                    li.appendChild(subUl);
                    await loadContent(fullPath, subUl);
                }
            }

            container.appendChild(ul);
        }

        // Starte mit dem Laden des Web-Roots
        loadContent();
    </script>
</body>
</html>
